(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return s(8474)}])},8474:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return r}});var a=s(5893),l=s(7294);let n=(0,s(8967).eI)("https://rssjlrfmltlkpiwpctht.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJzc2pscmZtbHRsa3Bpd3BjdGh0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDc0MTEwNDgsImV4cCI6MjA2Mjk4NzA0OH0.rTqi5KJsTCUkettSd_xop_eSQ_PgUK_RlNJWkk1jAr4");function i(){let[e,t]=(0,l.useState)(null),[s,i]=(0,l.useState)(!1),[r,c]=(0,l.useState)(null),[o,d]=(0,l.useState)(""),u=async()=>{if(!e){d("Please select a file to upload.");return}i(!0),d(""),c(null);try{let t=e.name.split(".").pop(),s="".concat(Date.now(),".").concat(t),a="uploads/".concat(s),{error:l}=await n.storage.from("documents").upload(a,e);if(l)throw Error(l.message);let i=await fetch("/api/analyze",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filePath:a})}),r=await i.json();if(!i.ok)throw Error(r.error||"Analysis failed");c(r)}catch(e){d(e.message||"Something went wrong")}finally{i(!1)}};return(0,a.jsxs)("div",{className:"bg-white max-w-2xl mx-auto w-full p-6 sm:p-8 rounded-xl shadow-md mt-6 space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Upload your legal document"}),(0,a.jsx)("p",{className:"text-gray-500 text-sm",children:"Supported formats: PDF, DOCX, JPG/PNG"})]}),(0,a.jsx)("input",{type:"file",accept:".pdf,.doc,.docx,image/*",onChange:e=>{var s;t((null===(s=e.target.files)||void 0===s?void 0:s[0])||null),c(null),d("")},className:"block w-full text-sm text-gray-700 file:mr-4 file:py-2 file:px-4 file:border file:rounded file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"}),(0,a.jsxs)("button",{onClick:u,disabled:s,className:"w-full flex justify-center items-center px-4 py-2 bg-blue-600 text-white font-medium rounded hover:bg-blue-700 transition",children:[s?(0,a.jsxs)("svg",{className:"animate-spin h-5 w-5 mr-2 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8H4z"})]}):null,s?"Analyzing...":"Upload & Analyze"]}),o&&(0,a.jsx)("div",{className:"bg-red-100 text-red-700 text-sm px-4 py-2 rounded",children:o}),r&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"\uD83D\uDCC4 Summary"}),(0,a.jsx)("p",{className:"text-gray-700 mt-1",children:r.summary})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"\uD83D\uDCCC Important Clauses"}),(0,a.jsx)("ul",{className:"list-disc pl-5 text-gray-700 mt-1 space-y-1",children:r.clauses.map((e,t)=>(0,a.jsx)("li",{children:e},t))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"\uD83D\uDCA1 Simple Explanation"}),(0,a.jsx)("p",{className:"text-gray-700 mt-1",children:r.explanation})]})]})]})}function r(e){let{session:t}=e,[s,r]=(0,l.useState)(""),[c,o]=(0,l.useState)(""),[d,u]=(0,l.useState)(!1),[x,m]=(0,l.useState)(!1),[p,h]=(0,l.useState)(""),[g,f]=(0,l.useState)(t);(0,l.useEffect)(()=>{n.auth.getSession().then(e=>{let{data:{session:t}}=e;f(t)});let{data:{subscription:e}}=n.auth.onAuthStateChange((e,t)=>{f(t)});return()=>e.unsubscribe()},[]);let y=async()=>{await n.auth.signInWithOAuth({provider:"google"})},w=async()=>{m(!0),h("");let{error:e}=d?await n.auth.signUp({email:s,password:c}):await n.auth.signInWithPassword({email:s,password:c});e?h(e.message):h(d?"Signup successful! Check your email to confirm.":"Login successful!"),m(!1)},b=async()=>{await n.auth.signOut()};return(0,a.jsxs)("div",{className:"min-h-screen flex flex-col justify-between bg-gray-100",children:[(0,a.jsxs)("header",{className:"text-center p-6 bg-white shadow",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-blue-700",children:"AskYourContract.ai"}),(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:"Upload and understand legal documents instantly with AI"})]}),(0,a.jsx)("main",{className:"flex-grow flex items-center justify-center px-4 py-10",children:g?(0,a.jsxs)("div",{className:"w-full max-w-2xl px-4",children:[(0,a.jsxs)("div",{className:"mb-4 flex justify-between items-center",children:[(0,a.jsxs)("p",{className:"text-gray-700 font-medium",children:["Signed in as ",g.user.email]}),(0,a.jsx)("button",{type:"button",onClick:b,className:"text-sm text-red-600 hover:underline",children:"Sign out"})]}),(0,a.jsx)(i,{})]}):(0,a.jsxs)("div",{className:"w-full max-w-md bg-white p-6 rounded-lg shadow-md text-center space-y-6",children:[(0,a.jsx)("button",{type:"button",onClick:y,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded transition",children:"Sign in with Google"}),(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,a.jsx)("span",{className:"h-px w-10 bg-gray-300"}),(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"or"}),(0,a.jsx)("span",{className:"h-px w-10 bg-gray-300"})]}),(0,a.jsx)("input",{type:"email",name:"email",autoComplete:"username",placeholder:"Email",value:s,onChange:e=>r(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded"}),(0,a.jsx)("input",{type:"password",name:"password",autoComplete:"current-password",placeholder:"Password",value:c,onChange:e=>o(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded"}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("button",{type:"button",onClick:w,disabled:x,className:"w-full px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 transition",children:x?"Processing...":d?"Sign Up":"Login"}),(0,a.jsx)("button",{type:"button",onClick:()=>{u(!d),h("")},className:"px-4 py-2 bg-gray-700 text-white rounded hover:bg-gray-800 transition",children:d?"Login":"Sign Up"})]}),p&&(0,a.jsx)("p",{className:"text-sm text-red-600",role:"status",children:p})]})}),(0,a.jsxs)("footer",{className:"text-center text-sm text-gray-500 py-4",children:["\xa9 ",new Date().getFullYear()," AskYourContract.ai â€¢ All rights reserved."]})]})}}},function(e){e.O(0,[888,774,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);